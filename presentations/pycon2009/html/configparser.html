<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>configparser &mdash; PyCon 2009 - A Tour of Python Standard Library v2 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyCon 2009 - A Tour of Python Standard Library v2 documentation" href="index.html" />
    <link rel="next" title="Python Shortcuts" href="shortcuts.html" />
    <link rel="prev" title="unittest" href="unittest.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="shortcuts.html" title="Python Shortcuts"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="unittest.html" title="unittest"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyCon 2009 - A Tour of Python Standard Library v2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="configparser">
<h1>configparser<a class="headerlink" href="#configparser" title="Permalink to this headline">¶</a></h1>
<p>The configparser module reads configuration files.The files should be written
in a format similar to Windows INI files.  The file contains one or more
sections, separated by section names written in brackets. Each section can
contain one or more configuration items.</p>
<div class="section" id="changes-in-python-3k">
<h2>Changes in Python 3k<a class="headerlink" href="#changes-in-python-3k" title="Permalink to this headline">¶</a></h2>
<p>The ConfigParser module has been renamed to configparser in Python 3.0. The
2to3 tool will automatically adapt imports when converting your sources to 3.0.</p>
</div>
<div class="section" id="reading-a-configfile">
<h2>Reading a configfile<a class="headerlink" href="#reading-a-configfile" title="Permalink to this headline">¶</a></h2>
<p>Class RawConfigParser and its subclass ConfigParser, provides the basic
configuration object.</p>
<p>The sections of the configuration object can be accessed through the object&#8217;s
<cite>sections()</cite> method, the options for each section is availble through object&#8217;s
<cite>options(section)</cite> method.  and config value can be accessed through object&#8217;s,
<cite>get(section,option)</cite>.</p>
<p>The following example demonstrates the concepts which were discussed.</p>
<div class="highlight-python"><pre>[book]
title = THE ADVENTURES OF TINTIN
autor = HERGE
language = English

[cost]
Euro = 12.99
INR = 600
</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">ConfigParser</span>
<span class="kn">import</span> <span class="nn">string</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;config1.ini&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">sections</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">string</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot; &quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="s">&quot; = &quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-to-a-configfile">
<h2>Writing to a configfile<a class="headerlink" href="#writing-to-a-configfile" title="Permalink to this headline">¶</a></h2>
<p>RawConfigParser object can be used to write Configuration files.  When adding
sections or items, add them in the reverse order of how you want them to be
displayed in the actual file.  In addition, please note that using
RawConfigParser&#8217;s and the raw mode of ConfigParser&#8217;s respective set functions,
you can assign non-string values to keys internally, but will receive an error
when attempting to write to a file or when you get it in non-raw mode.
SafeConfigParser does not allow such assignments to take place.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">ConfigParser</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">()</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;15&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;true&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="s">&#39;3.1415&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;fun&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;Python&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="si">%(bar)s</span><span class="s"> is </span><span class="si">%(baz)s</span><span class="s">!&#39;</span><span class="p">)</span>

<span class="c"># Writing our configuration file to &#39;example.cfg&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example.cfg&#39;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">configfile</span><span class="p">:</span>
    <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">configfile</span><span class="p">)</span>
</pre></div>
</div>
<p>Configfile generated using this example</p>
<div class="highlight-python"><pre>[Section1]
bar = Python
int = 15
float = 3.1415
baz = fun
bool = true
foo = %(bar)s is %(baz)s!

</pre>
</div>
</div>
<div class="section" id="reading-the-configfile-with-value-types-and-interpolation">
<h2>Reading the configfile with value types and interpolation<a class="headerlink" href="#reading-the-configfile-with-value-types-and-interpolation" title="Permalink to this headline">¶</a></h2>
<p>An example of reading the configuration file again.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">ConfigParser</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;example.cfg&#39;</span><span class="p">)</span>

<span class="c"># getfloat() raises an exception if the value is not a float</span>
<span class="c"># getint() and getboolean() also do this for their respective types</span>
<span class="nb">float</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getfloat</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;float&#39;</span><span class="p">)</span>
<span class="nb">int</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;int&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">float</span> <span class="o">+</span> <span class="nb">int</span>

<span class="c"># Notice that the next output does not interpolate &#39;%(bar)s&#39; or &#39;%(baz)s&#39;.</span>
<span class="c"># This is because we are using a RawConfigParser().</span>
<span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">getboolean</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;bool&#39;</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Note that getint and getfloat return respective value types.</li>
<li>Also RawConfigParser() does not interpolate the option values, so the output
will still be <tt class="docutils literal"><span class="pre">%(bar)s'</span> <span class="pre">or</span> <span class="pre">'%(baz)s</span></tt></li>
<li>To get the output value interpolation (That is substition of option values at
places denoted), use use a ConfigParser or SafeConfigParser and the third
argument default 0 signifies interpolation and 1 indicates raw mode. There is
a fourth argument possible, taking a dict which will take higher precedence
to interpolation.</li>
</ul>
<p>The following example demonstrates these concepts well.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">ConfigParser</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;example.cfg&#39;</span><span class="p">)</span>

<span class="c"># Set the third, optional argument of get to 1 if you wish to use raw mode.</span>
<span class="k">print</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span> <span class="c"># -&gt; &quot;Python is fun!&quot;</span>
<span class="k">print</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="mf">1</span><span class="p">)</span> <span class="c"># -&gt; &quot;%(bar)s is %(baz)s!&quot;</span>

<span class="c"># The optional fourth argument is a dict with members that will take</span>
<span class="c"># precedence in interpolation.</span>
<span class="k">print</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;Section1&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="s">&#39;Documentation&#39;</span><span class="p">,</span>
                                        <span class="s">&#39;baz&#39;</span><span class="p">:</span> <span class="s">&#39;evil&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">configparser</a><ul>
<li><a class="reference" href="#changes-in-python-3k">Changes in Python 3k</a></li>
<li><a class="reference" href="#reading-a-configfile">Reading a configfile</a></li>
<li><a class="reference" href="#writing-to-a-configfile">Writing to a configfile</a></li>
<li><a class="reference" href="#reading-the-configfile-with-value-types-and-interpolation">Reading the configfile with value types and interpolation</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="unittest.html"
                                  title="previous chapter">unittest</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="shortcuts.html"
                                  title="next chapter">Python Shortcuts</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/configparser.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="shortcuts.html" title="Python Shortcuts"
             >next</a> |</li>
        <li class="right" >
          <a href="unittest.html" title="unittest"
             >previous</a> |</li>
        <li><a href="index.html">PyCon 2009 - A Tour of Python Standard Library v2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Senthil Kumaran.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6b1.
    </div>
  </body>
</html>