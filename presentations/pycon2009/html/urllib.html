<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>urllib &mdash; PyCon 2009 - A Tour of Python Standard Library v2 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyCon 2009 - A Tour of Python Standard Library v2 documentation" href="index.html" />
    <link rel="next" title="basehttpsever" href="basehttpserver.html" />
    <link rel="prev" title="time" href="time.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="basehttpserver.html" title="basehttpsever"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="time.html" title="time"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyCon 2009 - A Tour of Python Standard Library v2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="urllib">
<h1>urllib<a class="headerlink" href="#urllib" title="Permalink to this headline">¶</a></h1>
<p>This module provides a high-level interface for fetching data across the World Wide Web. In particular, the urlopen() function is similar to the built-in function open(), but accepts Universal Resource Locators (URLs) instead of filenames. Some restrictions apply can only open URLs for reading, and no seek operations are available.</p>
<div class="section" id="changes-in-py3k">
<h2>Changes in Py3k<a class="headerlink" href="#changes-in-py3k" title="Permalink to this headline">¶</a></h2>
<p>The urllib module has been split into parts and renamed in Python 3.0 to urllib.request, urllib.parse, and urllib.error. The 2to3 tool will automatically adapt imports when converting your sources to 3.0. Also note that the urllib.urlopen() function has been removed in Python 3.0 in favor of urllib2.urlopen().</p>
</div>
<div class="section" id="example-1">
<h2>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib</span>

<span class="n">query_args</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;q&#39;</span><span class="p">:</span><span class="s">&#39;query_string&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="s">&#39;bar&#39;</span><span class="p">}</span>
<span class="n">encoded_args</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">query_args</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;Encoded:&#39;</span><span class="p">,</span> <span class="n">encoded_args</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://localhost:8000/?&#39;</span> <span class="o">+</span> <span class="n">encoded_args</span>
<span class="k">print</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="example-2">
<h2>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s">&#39;http://www.example.com&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="example-3">
<h2>Example 3<a class="headerlink" href="#example-3" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s">&#39;http://localhost:8080/&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;RESPONSE:&#39;</span><span class="p">,</span> <span class="n">response</span>
<span class="k">print</span> <span class="s">&#39;URL      :&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span>

<span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>

<span class="k">print</span> <span class="s">&#39;DATE:&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="p">[</span><span class="s">&#39;date&#39;</span><span class="p">]</span>
<span class="k">print</span> <span class="s">&#39;HEADERS:&#39;</span>
<span class="k">print</span> <span class="s">&#39;--------&#39;</span>
<span class="k">print</span> <span class="n">headers</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&#39;LENGTH   :&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;DATA     :&#39;</span>
<span class="k">print</span> <span class="s">&#39;----------&#39;</span>
<span class="k">print</span> <span class="n">data</span>
</pre></div>
</div>
</div>
<div class="section" id="example-4">
<h2>Example 4<a class="headerlink" href="#example-4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">pathname2url</span><span class="p">,</span> <span class="n">url2pathname</span>

<span class="k">print</span> <span class="s">&#39;==Default==&#39;</span>

<span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/a/b/c&#39;</span>

<span class="k">print</span> <span class="s">&#39;Original:&#39;</span><span class="p">,</span> <span class="n">path</span>
<span class="k">print</span> <span class="s">&#39;URL:&#39;</span><span class="p">,</span> <span class="n">pathname2url</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;Path:&#39;</span><span class="p">,</span> <span class="n">url2pathname</span><span class="p">(</span><span class="s">&#39;/d/e/f&#39;</span><span class="p">)</span>


<span class="kn">from</span> <span class="nn">nturl2path</span> <span class="kn">import</span> <span class="n">pathname2url</span><span class="p">,</span> <span class="n">url2pathname</span>

<span class="k">print</span> <span class="s">&#39;== Windows without a Drive Letter ==&#39;</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;Original:&#39;</span><span class="p">,</span> <span class="n">path</span>
<span class="k">print</span> <span class="s">&#39;URL:&#39;</span><span class="p">,</span> <span class="n">pathname2url</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;Path:&#39;</span><span class="p">,</span> <span class="n">url2pathname</span><span class="p">(</span><span class="s">&#39;/d/e/f&#39;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;== Windows URL with a Drive Letter ==&#39;</span>
<span class="n">path</span> <span class="o">=</span> <span class="s">&#39;C:</span><span class="se">\\</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;Original:&#39;</span><span class="p">,</span> <span class="n">path</span>
<span class="k">print</span> <span class="s">&#39;URL     :&#39;</span><span class="p">,</span> <span class="n">pathname2url</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;Path    :&#39;</span><span class="p">,</span> <span class="n">url2pathname</span><span class="p">(</span><span class="s">&#39;/d/e/f&#39;</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="section" id="example-5">
<h2>Example 5<a class="headerlink" href="#example-5" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib</span>

<span class="n">query_args</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;q&#39;</span><span class="p">:</span><span class="s">&#39;query string&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="s">&#39;bar&#39;</span><span class="p">}</span>
<span class="n">encoded_args</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">query_args</span><span class="p">)</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://localhost:8000/&#39;</span>
<span class="k">print</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">encoded_args</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="example-6">
<h2>Example 6<a class="headerlink" href="#example-6" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://uthcode.sarovar.org/~senthil&#39;</span>
<span class="k">print</span> <span class="s">&#39;urlencode():&#39;</span><span class="p">,</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">({</span><span class="s">&#39;url&#39;</span><span class="p">:</span><span class="n">url</span><span class="p">})</span>
<span class="k">print</span> <span class="s">&#39;quote():&#39;</span><span class="p">,</span> <span class="n">urllib</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;quote_plus():&#39;</span><span class="p">,</span> <span class="n">urllib</span><span class="o">.</span><span class="n">quote_plus</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">quoted</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">quoteplused</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">quote_plus</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;unquote&#39;</span><span class="p">,</span> <span class="n">urllib</span><span class="o">.</span><span class="n">unquote</span><span class="p">(</span><span class="n">quoted</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;unquote_plus&#39;</span><span class="p">,</span> <span class="n">urllib</span><span class="o">.</span><span class="n">unquote_plus</span><span class="p">(</span><span class="n">quoteplused</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="example-7">
<h2>Example 7<a class="headerlink" href="#example-7" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">reporthook</span><span class="p">(</span><span class="n">blocks_read</span><span class="p">,</span> <span class="n">block_size</span><span class="p">,</span> <span class="n">total_size</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">blocks_read</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;Connection opened&#39;</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">total_size</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span>
        <span class="c"># unknown size</span>
        <span class="k">print</span> <span class="s">&#39;Read </span><span class="si">%d</span><span class="s"> blocks&#39;</span> <span class="o">%</span> <span class="n">blocks_read</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">amount_read</span> <span class="o">=</span> <span class="n">blocks_read</span> <span class="o">*</span> <span class="n">block_size</span>
        <span class="k">print</span> <span class="s">&#39;Read </span><span class="si">%d</span><span class="s"> blocks, or </span><span class="si">%d</span><span class="s"> </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">blocks_read</span><span class="p">,</span> <span class="n">amount_read</span><span class="p">,</span>
                                            <span class="n">total_size</span><span class="p">)</span>
        <span class="k">return</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">filename</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="s">&#39;http://www.example.com&#39;</span><span class="p">,</span>
                                       <span class="n">reporthook</span><span class="o">=</span><span class="n">reporthook</span><span class="p">)</span>
    <span class="k">print</span>
    <span class="k">print</span> <span class="s">&#39;File:&#39;</span><span class="p">,</span> <span class="n">filename</span>
    <span class="k">print</span> <span class="s">&#39;Headers:&#39;</span>
    <span class="k">print</span> <span class="n">msg</span>
    <span class="k">print</span> <span class="s">&#39;File exists before cleanup:&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="k">finally</span><span class="p">:</span>
    <span class="n">urllib</span><span class="o">.</span><span class="n">urlcleanup</span><span class="p">()</span>

    <span class="k">print</span> <span class="s">&#39;File still exists:&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">urllib</a><ul>
<li><a class="reference" href="#changes-in-py3k">Changes in Py3k</a></li>
<li><a class="reference" href="#example-1">Example 1</a></li>
<li><a class="reference" href="#example-2">Example 2</a></li>
<li><a class="reference" href="#example-3">Example 3</a></li>
<li><a class="reference" href="#example-4">Example 4</a></li>
<li><a class="reference" href="#example-5">Example 5</a></li>
<li><a class="reference" href="#example-6">Example 6</a></li>
<li><a class="reference" href="#example-7">Example 7</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="time.html"
                                  title="previous chapter">time</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="basehttpserver.html"
                                  title="next chapter">basehttpsever</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/urllib.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="basehttpserver.html" title="basehttpsever"
             >next</a> |</li>
        <li class="right" >
          <a href="time.html" title="time"
             >previous</a> |</li>
        <li><a href="index.html">PyCon 2009 - A Tour of Python Standard Library v2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Senthil Kumaran.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6b1.
    </div>
  </body>
</html>